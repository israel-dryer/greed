<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Settings</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="s-content-container">
    @if (settings) {
      <section class="sd-list-section">
        <ion-list lines>
          <ion-list-header>
            <ion-label>Game Play</ion-label>
          </ion-list-header>

          <ion-item>
            <ion-icon slot="start" name="sound"></ion-icon>
            <ion-toggle [checked]="settings.soundEffects" (ionChange)="soundEffectsChanged($event)">
              <ion-label>
                <h2>Sound Effects</h2>
                <ion-note class="ion-text-wrap">Toggle in game sound effects</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
          <ion-item>
            <ion-icon slot="start" name="distribution"></ion-icon>
            <ion-toggle [checked]="settings.fairDice" (ionChange)="fairDiceChanged($event)">
              <ion-label>
                <h2>Use Fair Dice</h2>
                <ion-note class="ion-text-wrap">Guaranteed normal distribution over 36 rolls</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
          <ion-list-header>
            <ion-label>Account</ion-label>
          </ion-list-header>

          @if (isLoggedIn()) {
            <ion-item button (click)="syncData()">
              <ion-icon slot="start" name="cloud-upload"></ion-icon>
              <ion-label>
                <h2>Sync Data</h2>
                <ion-note class="ion-text-wrap">Backup your data to the cloud</ion-note>
              </ion-label>
            </ion-item>
            <ion-item button (click)="deleteAccount()">
              <ion-icon slot="start" name="trash"></ion-icon>
              <ion-label>
                <h2>Delete All Data</h2>
                <ion-note class="ion-text-wrap">Remove all local and cloud data</ion-note>
              </ion-label>
            </ion-item>
            <ion-item button (click)="logout()">
              <ion-icon slot="start" name="exit"></ion-icon>
              <ion-label>
                <h2>Sign Out</h2>
                <ion-note class="ion-text-wrap">{{ userEmail() }}</ion-note>
              </ion-label>
            </ion-item>
          } @else {
            <ion-item button (click)="login()">
              <ion-icon slot="start" name="log-in"></ion-icon>
              <ion-label>
                <h2>Sign In</h2>
                <ion-note class="ion-text-wrap">Sign in to sync data across devices</ion-note>
              </ion-label>
            </ion-item>
          }

          <ion-item lines="none" class="ion-text-center ion-margin-top">
            <ion-label>
              <ion-text color="medium">Version {{ version }}</ion-text>
            </ion-label>
          </ion-item>
        </ion-list>
      </section>
    }
  </div>
</ion-content>
